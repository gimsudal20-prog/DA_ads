name: Naver Ads Auto Collector

on:
  schedule:
    # âœ¨ [í•µì‹¬ ë³€ê²½] ë§¤ ì •ê°ë§ˆë‹¤(1ì‹œê°„ ë‹¨ìœ„) ë„¤ì´ë²„ ìƒíƒœë¥¼ ê°ì‹œí•˜ì—¬ êº¼ì§„ ì‹œê°„ì„ ì¹¼ê°™ì´ ì¡ì•„ëƒ…ë‹ˆë‹¤.
    - cron: '0 * * * *'
  workflow_dispatch: 

jobs:
  run-collector:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¥ ì†ŒìŠ¤ ì½”ë“œ ê°€ì ¸ì˜¤ê¸°
        uses: actions/checkout@v3

      - name: ğŸ íŒŒì´ì¬ í™˜ê²½ ì„¸íŒ…
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: ğŸ“¦ í•„ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
        run: |
          pip install -r requirements.txt

      - name: ğŸš€ ë°ì´í„° ìˆ˜ì§‘ ë° êº¼ì§ ì‹œê°„ ìŠ¤ìº” ì‹¤í–‰
        env:
          DATABASE_URL: ${{ secrets.DATABASE_URL }}
          NAVER_API_KEY: ${{ secrets.NAVER_API_KEY }}
          NAVER_API_SECRET: ${{ secrets.NAVER_API_SECRET }}
          CUSTOMER_ID: ${{ secrets.CUSTOMER_ID }}
        run: |
          python collector.py
