name: Naver Ads Auto Collector

# ì–¸ì œ ì´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í• ì§€ ì„¤ì •í•©ë‹ˆë‹¤.
on:
  schedule:
    # í•œêµ­ ì‹œê°„ ê¸°ì¤€ ë§¤ì¼ ì•„ì¹¨ 8ì‹œ, ì˜¤í›„ 2ì‹œ, ì €ë… 8ì‹œì— ìë™ìœ¼ë¡œ ìˆ˜ì§‘ê¸°ë¥¼ ëŒë¦½ë‹ˆë‹¤. (UTC ì‹œê°„ ê¸°ì¤€ ì„¤ì •)
    - cron: '0 23,5,11 * * *'
  # GitHub ì›¹ì‚¬ì´íŠ¸ì—ì„œ ìˆ˜ë™ìœ¼ë¡œ ì‹¤í–‰ ë²„íŠ¼ì„ ëˆ„ë¥¼ ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.
  workflow_dispatch: 

jobs:
  run-collector:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¥ ì†ŒìŠ¤ ì½”ë“œ ê°€ì ¸ì˜¤ê¸°
        uses: actions/checkout@v3

      - name: ğŸ íŒŒì´ì¬ í™˜ê²½ ì„¸íŒ…
        uses: actions/setup-python@v4
        with:
          python-version: '3.11' # íŒŒì´ì¬ ë²„ì „

      - name: ğŸ“¦ í•„ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
        run: |
          pip install -r requirements.txt

      - name: ğŸš€ ë°ì´í„° ìˆ˜ì§‘ê¸° ì‹¤í–‰ (ë¹„ë°€í‚¤ ì‚¬ìš©)
        env:
          DATABASE_URL: ${{ secrets.DATABASE_URL }}
          NAVER_API_KEY: ${{ secrets.NAVER_API_KEY }}
          NAVER_API_SECRET: ${{ secrets.NAVER_API_SECRET }}
          CUSTOMER_ID: ${{ secrets.CUSTOMER_ID }}
        run: |
          python collector.py
