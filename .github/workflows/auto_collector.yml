name: Naver Ads Auto Collector

on:
  schedule:
    # ë§¤ ì •ê°ë§ˆë‹¤(1ì‹œê°„ ë‹¨ìœ„) ë„¤ì´ë²„ ìƒíƒœë¥¼ ê°ì‹œí•˜ì—¬ êº¼ì§„ ì‹œê°„ì„ ì¹¼ê°™ì´ ì¡ì•„ëƒ…ë‹ˆë‹¤.
    - cron: '0 * * * *'
  workflow_dispatch: 

jobs:
  run-collector:
    runs-on: ubuntu-latest

    env:
      TZ: Asia/Seoul # í•œêµ­ ì‹œê°„ ê¸°ì¤€ ì„¤ì •

    steps:
      - name: ğŸ“¥ ì†ŒìŠ¤ ì½”ë“œ ê°€ì ¸ì˜¤ê¸°
        uses: actions/checkout@v4

      - name: ğŸ íŒŒì´ì¬ í™˜ê²½ ì„¸íŒ…
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: ğŸ“¦ í•„ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      - name: ğŸš€ ë°ì´í„° ìˆ˜ì§‘ ë° êº¼ì§ ì‹œê°„ ìŠ¤ìº” ì‹¤í–‰
        env:
          # âœ¨ ì—¬ê¸°ê°€ í•µì‹¬! backfill.ymlê³¼ ë˜‘ê°™ì´ _ADS_ ê°€ ë“¤ì–´ê°„ ì´ë¦„ìœ¼ë¡œ ë§ì·„ìŠµë‹ˆë‹¤.
          DATABASE_URL: ${{ secrets.DATABASE_URL }}
          NAVER_ADS_API_KEY: ${{ secrets.NAVER_ADS_API_KEY }}
          NAVER_ADS_SECRET: ${{ secrets.NAVER_ADS_SECRET }}
          CUSTOMER_ID: ${{ secrets.CUSTOMER_ID }}
        run: |
          python collector.py
